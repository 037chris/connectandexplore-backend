{"file":"C:\\Users\\naceu\\OneDrive\\Desktop\\Studium\\5 Semester\\Projekt\\connectandexplore\\Backend\\server.ts","mappings":";;;;;AAAA,sDAA8D;AAC9D,MAAM,UAAU,GAAG,OAAO,CAAC,aAAa,CAAC,CAAC;AAC1C,MAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACzB,MAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC7B,MAAM,GAAG,GAAG,EAAE,CAAC,YAAY,CAAC,wBAAwB,CAAC,CAAC;AACtD,MAAM,IAAI,GAAG,EAAE,CAAC,YAAY,CAAC,yBAAyB,CAAC,CAAC;AACxD,sCAAwC;AACxC,kFAA0D;AAC1D,kDAA0B;AAC1B,MAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC7B,kEAA8C;AAC9C,uEAA+C;AAC/C,2EAAmD;AACnD,+DAA6C;AAC7C,yEAAkD;AAClD,MAAM,GAAG,GAAY,IAAA,iBAAO,GAAE,CAAC;AAC/B,MAAM,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC;AACrC,YAAY;AACZ,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;AAErB,GAAG,CAAC,GAAG,CAAC,UAAU,GAAG,EAAE,GAAG,EAAE,IAAI;IAC9B,GAAG,CAAC,MAAM,CAAC,6BAA6B,EAAE,GAAG,CAAC,CAAC;IAC/C,GAAG,CAAC,MAAM,CACR,8BAA8B,EAC9B,gDAAgD,CACjD,CAAC;IACF,GAAG,CAAC,MAAM,CAAC,+BAA+B,EAAE,eAAe,CAAC,CAAC;IAC7D,IAAI,EAAE,CAAC;AACT,CAAC,CAAC,CAAC;AAEH,GAAG,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC;AAC3B,GAAG,CAAC,GAAG,CAAC,iBAAO,CAAC,UAAU,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;AAChD,GAAG,CAAC,GAAG,CAAC,iBAAO,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC;AACnC,GAAG,CAAC,GAAG,CAAC,YAAY,EAAE,mBAAS,CAAC,CAAC;AACjC,GAAG,CAAC,GAAG,CAAC,MAAM,EAAE,qBAAW,CAAC,CAAC;AAC7B,GAAG,CAAC,GAAG,CAAC,YAAY,EAAE,eAAW,CAAC,CAAC;AACnC,GAAG,CAAC,GAAG,CAAC,aAAa,EAAE,oBAAW,CAAC,CAAC;AACpC,IAAA,iBAAW,EAAC,GAAG,EAAE,CAAC,IAAI,CAAC,CAAC;AACxB,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;IACzB,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AACpC,CAAC,CAAC,CAAC;AAEH,IAAA,YAAO,GAAE;KACN,IAAI,CAAC,KAAK,IAAI,EAAE;IACf,qDAAqD;IACrD,MAAM,IAAA,yBAAe,GAAE,CAAC;IACxB,IAAI,MAAM,GAAG,eAAK,CAAC,YAAY,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC;IACpD,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,EAAE;QACvB,OAAO,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;IACvC,CAAC,CAAC,CAAC;AACL,CAAC,CAAC;KACD,KAAK,CAAC,CAAC,GAAG,EAAE,EAAE;IACb,OAAO,CAAC,KAAK,CAAC,oCAAoC,EAAE,GAAG,CAAC,CAAC;AAC3D,CAAC,CAAC,CAAC;AAEL,kBAAe,GAAG,CAAC","names":[],"sources":["C:\\Users\\naceu\\OneDrive\\Desktop\\Studium\\5 Semester\\Projekt\\connectandexplore\\Backend\\server.ts"],"sourcesContent":["import express, { Express, Request, Response } from \"express\";\r\nconst bodyParser = require(\"body-parser\");\r\nconst fs = require(\"fs\");\r\nconst cors = require(\"cors\");\r\nconst key = fs.readFileSync(\"./certificates/key.pem\");\r\nconst cert = fs.readFileSync(\"./certificates/cert.pem\");\r\nimport { connect } from \"./database/db\";\r\nimport createAdminUser from \"./src/utils/CreateAdminUser\";\r\nimport https from \"https\";\r\nconst http = require(\"http\");\r\nimport swaggerDocs from \"./src/utils/swagger\";\r\nimport UserRoute from \"./src/routes/UserRoute\";\r\nimport UsersRouter from \"./src/routes/UsersRouter\";\r\nimport loginRouter from \"./src/routes/login\";\r\nimport EventRouter from \"./src/routes/EventRoute\";\r\nconst app: Express = express();\r\nconst port = process.env.PORT || 443;\r\n/* Routes */\r\napp.use(\"*\", cors());\r\n\r\napp.use(function (req, res, next) {\r\n  res.header(\"Access-Control-Allow-Origin\", \"*\");\r\n  res.header(\r\n    \"Access-Control-Allow-Headers\",\r\n    \"Origin, X-Requested-With, Content-Type, Accept\"\r\n  );\r\n  res.header(\"Access-Control-Expose-Headers\", \"Authorization\");\r\n  next();\r\n});\r\n\r\napp.use(bodyParser.json());\r\napp.use(express.urlencoded({ extended: true }));\r\napp.use(express.static(__dirname));\r\napp.use(\"/api/users\", UserRoute);\r\napp.use(\"/api\", UsersRouter);\r\napp.use(\"/api/login\", loginRouter);\r\napp.use(\"/api/events\", EventRouter);\r\nswaggerDocs(app, +port);\r\napp.use((req, res, next) => {\r\n  res.status(404).json(\"Not Found\");\r\n});\r\n\r\nconnect()\r\n  .then(async () => {\r\n    // Create admin user after connecting to the database\r\n    await createAdminUser();\r\n    let server = https.createServer({ key, cert }, app);\r\n    server.listen(port, () => {\r\n      console.log(\"Listening on port 443\");\r\n    });\r\n  })\r\n  .catch((err) => {\r\n    console.error(\"Failed to connect to the database:\", err);\r\n  });\r\n\r\nexport default app;\r\n"],"version":3}