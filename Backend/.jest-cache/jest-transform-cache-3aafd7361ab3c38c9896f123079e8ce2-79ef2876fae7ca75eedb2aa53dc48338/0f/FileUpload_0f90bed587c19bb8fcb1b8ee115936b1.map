{"file":"C:\\Users\\naceu\\OneDrive\\Desktop\\Studium\\5 Semester\\Projekt\\connectandexplore\\Backend\\src\\utils\\FileUpload.ts","mappings":";;;;;;AAAA,oDAA4B;AAC5B,gDAAwB;AACxB,4CAAoB;AACpB,+BAAoC;AACpC,mHAAmH;AACnH,MAAM,OAAO,GAAG,gBAAM,CAAC,WAAW,CAAC;IACjC,WAAW,EAAE,UAAU,GAAG,EAAE,IAAI,EAAE,EAAE;QAClC,EAAE,CAAC,IAAI,EAAE,cAAI,CAAC,IAAI,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC,CAAC;IAC9C,CAAC;IAED,QAAQ,EAAE,UAAU,GAAQ,EAAE,IAAS,EAAE,EAAO;QAC9C,MAAM,cAAc,GAAG,GAAG,IAAA,SAAM,GAAE,IAAI,IAAI,CAAC,YAAY,EAAE,CAAC;QAC1D,EAAE,CAAC,IAAI,EAAE,cAAc,CAAC,CAAC;IAC3B,CAAC;CACF,CAAC,CAAC;AACH,MAAM,UAAU,GAAG,CAAC,GAAQ,EAAE,IAAS,EAAE,EAAO,EAAE,EAAE;IAClD,IACE,IAAI,CAAC,QAAQ,KAAK,WAAW;QAC7B,IAAI,CAAC,QAAQ,KAAK,YAAY;QAC9B,IAAI,CAAC,QAAQ,KAAK,WAAW,EAC7B,CAAC;QACD,EAAE,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;IACjB,CAAC;SAAM,CAAC;QACN,EAAE,CAAC,IAAI,KAAK,CAAC,+CAA+C,CAAC,EAAE,KAAK,CAAC,CAAC;IACxE,CAAC;AACH,CAAC,CAAC;AACF,SAAgB,oBAAoB,CAAC,QAAgB;IACnD,IAAI,CAAC;QACH,MAAM,QAAQ,GAAG,cAAI,CAAC,IAAI,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;QAChD,YAAE,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;IAC1B,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,MAAM,KAAK,CAAC;IACd,CAAC;AACH,CAAC;AAPD,oDAOC;AAED,SAAgB,oBAAoB,CAAC,QAAgB;IACnD;;;;;;;QAOI;AACN,CAAC;AATD,oDASC;AAED,0BAA0B;AACb,QAAA,MAAM,GAAG,IAAA,gBAAM,EAAC;IAC3B,OAAO,EAAE,OAAO;IAChB,UAAU,EAAE,UAAU;IACtB,MAAM,EAAE,EAAE,QAAQ,EAAE,EAAE,GAAG,IAAI,GAAG,IAAI,EAAE;CACvC,CAAC,CAAC","names":[],"sources":["C:\\Users\\naceu\\OneDrive\\Desktop\\Studium\\5 Semester\\Projekt\\connectandexplore\\Backend\\src\\utils\\FileUpload.ts"],"sourcesContent":["import multer from \"multer\";\r\nimport path from \"path\";\r\nimport fs from \"fs\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n//Copyright of script: https://medium.com/@bviveksingh96/uploading-images-files-with-multer-in-node-js-f942e9319600\r\nconst storage = multer.diskStorage({\r\n  destination: function (req, file, cb) {\r\n    cb(null, path.join(__dirname, \"/uploads/\"));\r\n  },\r\n\r\n  filename: function (req: any, file: any, cb: any) {\r\n    const uniqueFilename = `${uuidv4()}-${file.originalname}`;\r\n    cb(null, uniqueFilename);\r\n  },\r\n});\r\nconst fileFilter = (req: any, file: any, cb: any) => {\r\n  if (\r\n    file.mimetype === \"image/jpg\" ||\r\n    file.mimetype === \"image/jpeg\" ||\r\n    file.mimetype === \"image/png\"\r\n  ) {\r\n    cb(null, true);\r\n  } else {\r\n    cb(new Error(\"Image uploaded is not of type jpg/jpeg or png\"), false);\r\n  }\r\n};\r\nexport function deleteProfilePicture(filename: string): void {\r\n  try {\r\n    const filePath = path.join(__dirname, filename);\r\n    fs.unlinkSync(filePath);\r\n  } catch (error) {\r\n    throw error;\r\n  }\r\n}\r\n\r\nexport function deleteEventThumbnail(filename: string): void {\r\n  /* try {\r\n    const filePath = path.join(__dirname, filename);\r\n    fs.unlinkSync(filePath);\r\n    console.log(`Deleted event thumbnail: ${filename}`);\r\n  } catch (error) {\r\n    console.error(`Error deleting event thumbnail: ${filename}`, error);\r\n    throw error;\r\n  } */\r\n}\r\n\r\n// file size : 10 MB limit\r\nexport const upload = multer({\r\n  storage: storage,\r\n  fileFilter: fileFilter,\r\n  limits: { fileSize: 10 * 1024 * 1024 },\r\n});\r\n"],"version":3}